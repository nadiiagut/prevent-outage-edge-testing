worker_processes 1;

events {
    worker_connections 256;
}

http {
    server {
        listen 80;
        server_name localhost;

        location / {
            add_header X-Upstream-ID "upstream1" always;
            add_header X-Response-Time "5ms" always;
            return 200 '{"server": "upstream1", "status": "healthy"}';
            add_header Content-Type application/json;
        }

        location /echo {
            add_header X-Upstream-ID "upstream1" always;
            return 200 '{"server": "upstream1", "path": "$uri", "args": "$args"}';
            add_header Content-Type application/json;
        }

        location /health {
            return 200 'OK';
        }
    }
}
